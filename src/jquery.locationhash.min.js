$.locationHash={str_separaterKeyKey:"&",str_separaterKeyValue:"=",str_separaterValueValue:"|",str_locationhashBefore:"#!"};
$.locationHashParameter=function(b,c,d){d=$.extend(true,{},{forceUpdate:false},d);if(typeof c==="undefined"||c==="")return false;if(typeof b==="undefined"||b==="")return false;var g=-1,e=function(){var j=location.hash.slice($.locationHash.str_locationhashBefore.length);return j===""?[]:j.split($.locationHash.str_separaterKeyKey)}();for(var f in e)if(e[f].toString().indexOf(b)>-1)g=f;if(g>-1)e=function(){for(var j=e[g].substring(0,e[g].indexOf($.locationHash.str_separaterKeyValue)),a=e[g].substring(e[g].indexOf($.locationHash.str_separaterKeyValue)+
1).split($.locationHash.str_separaterValueValue),l=-1,k=0,h=a.length;k<h;k++)if(a[k].toString().indexOf(c)>-1)l=k;if(d.forceUpdate===false)if(l>-1)if(a.length===1)a=[];else a.splice(l,1);else a.push(c.toString());else a=[c];if(a.length===0)e.splice(g,1);else{a.sort();e[g]=j+$.locationHash.str_separaterKeyValue+a.join($.locationHash.str_separaterValueValue)}return e}();else e.push(b+$.locationHash.str_separaterKeyValue+c.toString());e.sort();location.hash=$.locationHash.str_locationhashBefore+e.join($.locationHash.str_separaterKeyKey)};
$.fn.getLocationHash=function(b){b=$.extend(true,{},{mergeParam:[],ignoreParam:[]},b);var c=$(this).serializeArray(),d={},g=[],e={};if(b.mergeParam.length>0)for(var f=0,j=b.mergeParam.length;f<j;f++)e[b.mergeParam[f]]=[];for(var a=0,l=c.length;a<l;a++)if(!(b.ignoreParam.join(",").indexOf(c[a].name)>-1))if(c[a].value!==""){if(b.mergeParam.length>0){var k="";f=0;for(j=b.mergeParam.length;f<j;f++)if(c[a].name.indexOf(b.mergeParam[f])>-1){e[b.mergeParam[f]].push(c[a].name.split("__")[1]);k=b.mergeParam[f]}if(k!==
""){d[k]=[];continue}}if(typeof d[c[a].name]==="undefined")d[c[a].name]=[];d[c[a].name].push(c[a].value)}if(b.mergeParam.length>0)for(var h in e)if(e[h].length>0)d[h]=e[h];for(h in d){a=0;for(l=d[h].length;a<l;a++)d[h][a]=encodeURI(d[h][a]);g.push(h+$.locationHash.str_separaterKeyValue+d[h].join($.locationHash.str_separaterValueValue))}return g.join($.locationHash.str_separaterKeyKey)};
$.getParameterFromLocationHash=function(){var b={},c=location.hash.slice(2).split($.locationHash.str_separaterKeyKey);i=0;for(len=c.length;i<len;i++)if(c[i]!==""){var d=c[i].split($.locationHash.str_separaterKeyValue);if(d[1].indexOf($.locationHash.str_separaterValueValue)>-1)d[1]=d[1].split($.locationHash.str_separaterValueValue);b[d[0]]=d[1]}return b};
