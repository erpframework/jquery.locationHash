/**
 * jQuery.locationHash.js
 *
 * @author Ryosuke Sawada<ryosuke.sawada@gmail.com>
 * @require jQuery
 * @licence MIT Licence
 */
$.locationHash={str_separaterKeyKey:"&",str_separaterKeyValue:"=",str_separaterValueValue:"|",str_locationhashBefore:"#!"};
$.locationHashParameter=function(b,a){if(typeof a==="undefined"||a==="")return!1;if(typeof b==="undefined"||b==="")return!1;var c=-1,d=function(){var a=location.hash.slice($.locationHash.str_locationhashBefore.length);return a===""?[]:a.split($.locationHash.str_separaterKeyKey)}(),f;for(f in d)d[f].toString().indexOf(b)>-1&&(c=f);c>-1?d=function(){var b=d[c].substring(0,d[c].indexOf($.locationHash.str_separaterKeyValue)),g=d[c].substring(d[c].indexOf($.locationHash.str_separaterKeyValue)+1).split($.locationHash.str_separaterValueValue),
e=-1,f;for(f in g)g[f].toString().indexOf(a)>-1&&(e=f);e>-1?g.length===1?g=[]:g.splice(e,1):g.push(a.toString());g.length===0?d.splice(c,1):(g.sort(),d[c]=b+$.locationHash.str_separaterKeyValue+g.join($.locationHash.str_separaterValueValue));return d}():d.push(b+$.locationHash.str_separaterKeyValue+a.toString());d.sort();location.hash=$.locationHash.str_locationhashBefore+d.join($.locationHash.str_separaterKeyKey)};
$.fn.getLocationHash=function(b){var b=$.extend(!0,{},{mergeParam:[],ignoreParam:[]},b),a=$(this).serializeArray(),c={},d=[],f={};if(b.mergeParam.length>0)for(var h=0,g=b.mergeParam.length;h<g;h++)f[b.mergeParam[h]]=[];for(var e=0,l=a.length;e<l;e++)if(!(b.ignoreParam.join(",").indexOf(a[e].name)>-1)&&a[e].value!==""){if(b.mergeParam.length>0){for(var k="",h=0,g=b.mergeParam.length;h<g;h++)a[e].name.indexOf(b.mergeParam[h])>-1&&(f[b.mergeParam[h]].push(a[e].name.split("__")[1]),k=b.mergeParam[h]);
if(k!==""){c[k]=[];continue}}typeof c[a[e].name]==="undefined"&&(c[a[e].name]=[]);c[a[e].name].push(a[e].value)}if(b.mergeParam.length>0)for(var j in f)f[j].length>0&&(c[j]=f[j]);for(j in c)d.push(j+$.locationHash.str_separaterKeyValue+c[j].join($.locationHash.str_separaterValueValue));return d.join($.locationHash.str_separaterKeyKey)};
$.getParameterFromLocationHash=function(){var b={},a=1;location.hash.indexOf("#!")>-1&&(a=2);a=location.hash.slice(a).split($.locationHash.str_separaterKeyKey);i=0;for(len=a.length;i<len;i++)if(a[i]!==""){var c=a[i].split($.locationHash.str_separaterKeyValue);c[1].indexOf($.locationHash.str_separaterValueValue)>-1&&(c[1]=c[1].split($.locationHash.str_separaterValueValue));b[c[0]]=c[1]}return b};

