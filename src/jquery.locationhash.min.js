$.locationHash={str_separaterKeyKey:"&",str_separaterKeyValue:"=",str_separaterValueValue:"|",str_locationhashBefore:"#!"};
$.locationHashParameter=function(d,b,c){c=$.extend(true,{},{forceUpdate:false},c);if(typeof b==="undefined")return false;if(typeof d==="undefined")return false;var g=-1,e=function(){var j=location.hash.slice($.locationHash.str_locationhashBefore.length);return j===""?[]:j.split($.locationHash.str_separaterKeyKey)}();for(var f in e)if(e[f].toString().indexOf(d)>-1)g=f;if(g>-1)e=function(){for(var j=e[g].substring(0,e[g].indexOf($.locationHash.str_separaterKeyValue)),a=e[g].substring(e[g].indexOf($.locationHash.str_separaterKeyValue)+
1).split($.locationHash.str_separaterValueValue),l=-1,k=0,h=a.length;k<h;k++)if(a[k].toString().indexOf(b)>-1)l=k;if(c.forceUpdate===false)if(l>-1)if(a.length===1)a=[];else a.splice(l,1);else a.push(b.toString());else a=b===""?[]:[b];if(a.length===0)e.splice(g,1);else{a.sort();e[g]=j+$.locationHash.str_separaterKeyValue+a.join($.locationHash.str_separaterValueValue)}return e}();else b!==""&&e.push(d+$.locationHash.str_separaterKeyValue+b.toString());e.sort();location.hash=$.locationHash.str_locationhashBefore+
e.join($.locationHash.str_separaterKeyKey)};
$.fn.getLocationHash=function(d){d=$.extend(true,{},{mergeParam:[],ignoreParam:[]},d);var b=$(this).serializeArray(),c={},g=[],e={};if(d.mergeParam.length>0)for(var f=0,j=d.mergeParam.length;f<j;f++)e[d.mergeParam[f]]=[];for(var a=0,l=b.length;a<l;a++)if(!(d.ignoreParam.join(",").indexOf(b[a].name)>-1))if(b[a].value!==""){if(d.mergeParam.length>0){var k="";f=0;for(j=d.mergeParam.length;f<j;f++)if(b[a].name.indexOf(d.mergeParam[f])>-1){e[d.mergeParam[f]].push(b[a].name.split("__")[1]);k=d.mergeParam[f]}if(k!==
""){c[k]=[];continue}}if(typeof c[b[a].name]==="undefined")c[b[a].name]=[];c[b[a].name].push(b[a].value)}if(d.mergeParam.length>0)for(var h in e)if(e[h].length>0)c[h]=e[h];for(h in c){a=0;for(l=c[h].length;a<l;a++)c[h][a]=encodeURI(c[h][a]);g.push(h+$.locationHash.str_separaterKeyValue+c[h].join($.locationHash.str_separaterValueValue))}return g.join($.locationHash.str_separaterKeyKey)};
$.getParameterFromLocationHash=function(){var d={},b=location.hash.slice(2).split($.locationHash.str_separaterKeyKey);i=0;for(len=b.length;i<len;i++)if(b[i]!==""){var c=b[i].split($.locationHash.str_separaterKeyValue);if(c[1].indexOf($.locationHash.str_separaterValueValue)>-1)c[1]=c[1].split($.locationHash.str_separaterValueValue);d[c[0]]=c[1]}return d};
