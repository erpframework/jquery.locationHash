$.locationHash={str_separaterKeyKey:"&",str_separaterKeyValue:"=",str_separaterValueValue:"|",str_locationhashBefore:"#!"};
$.locationHashParameter=function(b,f,c){var k={};if($.type(b)!=="object")k[b]=f;else{k=b;c=f}c=$.extend(true,{},{forceUpdate:false},c);var e=function(){var j=location.hash.slice($.locationHash.str_locationhashBefore.length);return j===""?[]:j.split($.locationHash.str_separaterKeyKey)}();for(var g in k){b=g;var h=k[g];if(typeof h==="undefined")return false;if(typeof b==="undefined")return false;var a=-1;for(var l in e){f=new RegExp("^"+b+"=");if(e[l].toString().match(f)!==null)a=l}if(a>-1)e=function(){for(var j=
e[a].substring(0,e[a].indexOf($.locationHash.str_separaterKeyValue)),d=e[a].substring(e[a].indexOf($.locationHash.str_separaterKeyValue)+1).split($.locationHash.str_separaterValueValue),n=-1,m=0,o=d.length;m<o;m++)if(d[m].toString().indexOf(h)>-1)n=m;if(c.forceUpdate===false)if(n>-1)if(d.length===1)d=[];else d.splice(n,1);else d.push(h.toString());else d=h===""?[]:[h];if(d.length===0)e.splice(a,1);else{d.sort();e[a]=j+$.locationHash.str_separaterKeyValue+d.join($.locationHash.str_separaterValueValue)}return e}();
else h!==""&&e.push(b+$.locationHash.str_separaterKeyValue+h.toString())}e.sort();location.hash=$.locationHash.str_locationhashBefore+e.join($.locationHash.str_separaterKeyKey)};
$.fn.getLocationHash=function(b){b=$.extend(true,{},{mergeParam:[],ignoreParam:[]},b);var f=$(this).serializeArray(),c={},k=[],e={};if(b.mergeParam.length>0)for(var g=0,h=b.mergeParam.length;g<h;g++)e[b.mergeParam[g]]=[];for(var a=0,l=f.length;a<l;a++)if(!(b.ignoreParam.join(",").indexOf(f[a].name)>-1))if(f[a].value!==""){if(b.mergeParam.length>0){var j="";g=0;for(h=b.mergeParam.length;g<h;g++)if(f[a].name.indexOf(b.mergeParam[g])>-1){e[b.mergeParam[g]].push(f[a].name.split("__")[1]);j=b.mergeParam[g]}if(j!==
""){c[j]=[];continue}}if(typeof c[f[a].name]==="undefined")c[f[a].name]=[];c[f[a].name].push(f[a].value)}if(b.mergeParam.length>0)for(var d in e)if(e[d].length>0)c[d]=e[d];for(d in c){a=0;for(l=c[d].length;a<l;a++)c[d][a]=encodeURI(c[d][a]);k.push(d+$.locationHash.str_separaterKeyValue+c[d].join($.locationHash.str_separaterValueValue))}return k.join($.locationHash.str_separaterKeyKey)};
$.getParameterFromLocationHash=function(){var b={},f=location.hash.slice($.locationHash.str_locationhashBefore.length).split($.locationHash.str_separaterKeyKey);i=0;for(len=f.length;i<len;i++)if(f[i]!==""){var c=f[i].split($.locationHash.str_separaterKeyValue);if(c[1].indexOf($.locationHash.str_separaterValueValue)>-1)c[1]=c[1].split($.locationHash.str_separaterValueValue);b[c[0]]=c[1]}return b};
