$.locationHash={str_separaterKeyKey:"&",str_separaterKeyValue:"=",str_separaterValueValue:"|",str_locationhashBefore:"#!"};
$.locationHashParameter=function(a,f,c){var k={};if($.type(a)!=="object")k[a]=f;else{k=a;c=f}c=$.extend(true,{},{forceUpdate:false},c);var e=function(){var j=location.hash.slice($.locationHash.str_locationhashBefore.length);return j===""?[]:j.split($.locationHash.str_separaterKeyKey)}();for(var g in k){a=g;var h=k[g];if(typeof h==="undefined")return false;if(typeof a==="undefined")return false;var b=-1;for(var l in e){f=new RegExp("^"+a+"=");if(e[l].toString().match(f)!==null)b=l}if(b>-1)e=function(){for(var j=
e[b].substring(0,e[b].indexOf($.locationHash.str_separaterKeyValue)),d=e[b].substring(e[b].indexOf($.locationHash.str_separaterKeyValue)+1).split($.locationHash.str_separaterValueValue),n=-1,m=0,o=d.length;m<o;m++)if(d[m].toString().indexOf(h)>-1)n=m;if(c.forceUpdate===false)if(n>-1)if(d.length===1)d=[];else d.splice(n,1);else d.push(h.toString());else d=h===""?[]:[h];if(d.length===0)e.splice(b,1);else{d.sort();e[b]=j+$.locationHash.str_separaterKeyValue+d.join($.locationHash.str_separaterValueValue)}return e}();
else h!==""&&e.push(a+$.locationHash.str_separaterKeyValue+h.toString())}e.sort();location.hash=$.locationHash.str_locationhashBefore+e.join($.locationHash.str_separaterKeyKey)};
$.fn.getLocationHash=function(a){a=$.extend(true,{},{mergeParam:[],ignoreParam:[]},a);var f=$(this).serializeArray(),c={},k=[],e={};if(a.mergeParam.length>0)for(var g=0,h=a.mergeParam.length;g<h;g++)e[a.mergeParam[g]]=[];for(var b=0,l=f.length;b<l;b++)if(!(a.ignoreParam.join(",").indexOf(f[b].name)>-1))if(f[b].value!==""){if(a.mergeParam.length>0){var j="";g=0;for(h=a.mergeParam.length;g<h;g++)if(f[b].name.indexOf(a.mergeParam[g])>-1){e[a.mergeParam[g]].push(f[b].name.split("__")[1]);j=a.mergeParam[g]}if(j!==
""){c[j]=[];continue}}if(typeof c[f[b].name]==="undefined")c[f[b].name]=[];c[f[b].name].push(f[b].value)}if(a.mergeParam.length>0)for(var d in e)if(e[d].length>0)c[d]=e[d];for(d in c){b=0;for(l=c[d].length;b<l;b++)c[d][b]=encodeURI(c[d][b]);k.push(d+$.locationHash.str_separaterKeyValue+c[d].join($.locationHash.str_separaterValueValue))}return k.join($.locationHash.str_separaterKeyKey)};
$.getParameterFromLocationHash=function(a){a=a||{preprocess:function(){return location.hash}};var f={};a=a.preprocess().slice($.locationHash.str_locationhashBefore.length).split($.locationHash.str_separaterKeyKey);i=0;for(len=a.length;i<len;i++)if(a[i]!==""){var c=a[i].split($.locationHash.str_separaterKeyValue);if(c[1].indexOf($.locationHash.str_separaterValueValue)>-1)c[1]=c[1].split($.locationHash.str_separaterValueValue);f[c[0]]=c[1]}return f};
